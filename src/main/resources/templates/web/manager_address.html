<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{web/web_layout}">

<main id="content"
      class="bg-body-tertiary-01 d-flex flex-column main-content" th:fragment="content">
    <div class="dashboard-page-content" style="background-color: #f5f5f5;">

        <div class="row mb-9 align-items-center justify-content-between">

            <div class="col-sm-6 mb-8 mb-sm-0">
                <h2 class="fs-4 mb-0">Profile settings</h2>
            </div>
        </div>


        <div class="card mb-4 rounded-4 p-7">
            <div class="card-body pt-7 pb-0 px-0">
                <div class="row mx-n8">
                    <aside class="col-lg-3 border-end px-8">
                        <nav class="nav nav-pills flex-lg-column mb-7 nav-add-product">
                            <a class="nav-link" aria-current="page" href="#">General</a>
                            <a class="nav-link active" href="#">Address</a>
                        </nav>
                    </aside>
                    <!-- Main content -->
                    <div class="col-lg-9 px-3">
                        <div class="d-flex justify-content-between align-items-center mb-5">
                            <h5 class="mb-0 mx-4">My Address</h5>
                            <button class="btn btn-primary mx-4" data-bs-toggle="modal"
                                    data-bs-target="#addAddressModal">+ Add address</button>
                        </div>
                        <div class="list-group">
                            <!-- Example Address -->
                            <div
                                    class="list-group-item d-flex justify-content-between align-items-start py-10">
                                <div>
                                    <h6 class="mb-6">Võ Văn Tuấn <span
                                            class="badge bg-warning text-dark">Mặc định</span></h6>
                                    <p class="mb-2 small">
                                        <strong>Số điện thoại:</strong> +84 969 424 914
                                    </p>
                                    <p class="mb-3 small">27/27, Phường Tân Định, Quận
                                        1, TP. Hồ Chí Minh</p>
                                </div>
                                <div>
                                    <button class="btn btn-sm btn-outline-secondary me-1"
                                            data-bs-toggle="modal" data-bs-target="#editAddressModal">Cập
                                        nhật</button>
                                    <button class="btn btn-sm btn-outline-danger">Xóa</button>
                                </div>
                            </div>
                            <!-- Add more addresses here -->
                            <div
                                    class="list-group-item d-flex justify-content-between align-items-start py-10">
                                <div>
                                    <h6 class="mb-6">Võ Văn Tuấn</h6>
                                    <p class="mb-2 small">
                                        <strong>Số điện thoại:</strong> +84 969 424 914
                                    </p>
                                    <p class="mb-2 small">Số nhà 07, Hẻm 29, Hello, Hà Nội</p>
                                </div>
                                <div>
                                    <button class="btn btn-sm btn-outline-secondary me-1"
                                            data-bs-toggle="modal" data-bs-target="#editAddressModal">Cập
                                        nhật</button>
                                    <button class="btn btn-sm btn-outline-danger">Xóa</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modal for Adding New Address -->
                    <div class="modal fade" id="addAddressModal" tabindex="-1"
                         aria-labelledby="addAddressModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="addAddressModalLabel">Thêm địa chỉ mới</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form>
                                        <div class="mb-3">
                                            <label for="fullName" class="form-label">Họ và tên</label>
                                            <input type="text" class="form-control" id="fullName" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="phone" class="form-label">Số điện thoại</label>
                                            <input type="text" class="form-control" id="phone" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="address" class="form-label">Địa chỉ</label>
                                            <textarea class="form-control" id="address" rows="3"
                                                      required></textarea>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="defaultAddress">
                                            <label class="form-check-label" for="defaultAddress">Đặt làm mặc
                                                định</label>
                                        </div>
                                        <button type="submit" class="btn btn-primary mt-3">Lưu</button>
                                    </form>
                                </div>
                            </div>
                        </div>

                </div>

                    <!-- Modal for Editing Address -->
                    <div class="modal fade" id="editAddressModal" tabindex="-1"
                         aria-labelledby="editAddressModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="editAddressModalLabel">Cập nhật địa chỉ</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form>
                                        <!-- Same form as adding, pre-filled with address data -->
                                        <div class="mb-3">
                                            <label for="editFullName" class="form-label">Họ và tên</label>
                                            <input type="text" class="form-control" id="editFullName"
                                                   value="Võ Văn Tuấn" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="editPhone" class="form-label">Số điện thoại</label>
                                            <input type="text" class="form-control" id="editPhone"
                                                   value="+84 969 424 914" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="editAddress" class="form-label">Địa chỉ</label>
                                            <textarea class="form-control" id="editAddress" rows="3"
                                                      required>63/16, Nguyễn Hữu Cầu, Quận 1</textarea>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="editDefaultAddress"
                                                   checked>
                                            <label class="form-check-label" for="editDefaultAddress">Đặt làm mặc
                                                định</label>
                                        </div>
                                        <button type="submit" class="btn btn-primary mt-3">Cập nhật</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

            </div>

        </div>
    </div>

    <!--    <script>-->
    <!--        document.addEventListener('DOMContentLoaded', function () {-->
    <!--            // Display user information after successful login-->
    <!--            $.ajax({-->
    <!--                type: 'GET', // HTTP method-->
    <!--                url: '/account/me', // API endpoint-->
    <!--                dataType: 'json', // Expected response data type-->
    <!--                contentType: 'application/json; charset=utf-8', // Content type-->
    <!--                beforeSend: function (xhr) {-->
    <!--                    // Add authorization header if token exists in localStorage-->
    <!--                    if (localStorage.token) {-->
    <!--                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);-->
    <!--                    }-->
    <!--                },-->
    <!--                success: function (data) {-->
    <!--                    alert(data.email);-->

    <!--                    $('#full-name').val(data.fullname);-->
    <!--                    $('#email').val(data.email);-->
    <!--                    $('#address').val(data.address);-->
    <!--                    $('#phone').val(data.phone);-->
    <!--                },-->
    <!--                error: function (e) {-->
    <!--                    // Handle errors-->
    <!--                    const json = e.responseText;-->
    <!--                    alert("Sorry, you are not logged in.");-->
    <!--                    console.error(json);-->
    <!--                }-->
    <!--            });-->

    <!--            $('#FormUpDateInfo').on('submit', function (e) {-->
    <!--                // Hiển thị spinner khi bắt đầu xử lý-->
    <!--                const spinner = new bootstrap.Modal(document.getElementById('loadingSpinner'));-->
    <!--                spinner.show();-->

    <!--                e.preventDefault(); // Ngăn form submit mặc định-->

    <!--                // Lấy dữ liệu từ form và chuyển thành JSON-->
    <!--                const formDataArray = $('#FormUpDateInfo').serializeArray(); // Lấy dữ liệu dạng mảng-->
    <!--                const formDataJson = {};-->

    <!--// Duyệt qua từng phần tử trong mảng để tạo đối tượng JSON-->
    <!--                formDataArray.forEach(field => {-->
    <!--                    // Nếu trường có giá trị thì thêm vào đối tượng JSON-->
    <!--                    if (field.value) {-->
    <!--                        formDataJson[field.name] = field.value;-->
    <!--                    }-->
    <!--                });-->

    <!--                // Lấy token từ localStorage-->
    <!--                const token = localStorage.getItem("token");-->
    <!--                if (!token) {-->
    <!--                    console.error('Token không tồn tại trong localStorage!');-->
    <!--                    return;-->
    <!--                }-->

    <!--                // Decode the JWT token using jwt-decode-->
    <!--                const decoded = jwt_decode(token);-->
    <!--                const id = decoded.accId;-->

    <!--                // Gửi request bằng AJAX-->
    <!--                $.ajax({-->
    <!--                    url: `/account/${id}`, // URL server xử lý-->
    <!--                    type: 'PUT',          // Loại request-->
    <!--                    dataType: "json",-->
    <!--                    contentType: "application/json; charset=utf-8",-->
    <!--                    data: JSON.stringify(formDataJson),       // Dữ liệu từ form-->
    <!--                    headers: {-->
    <!--                        'Authorization': `Bearer ${token}` // Đính kèm JWT vào header-->
    <!--                    },-->
    <!--                    success: function (response) {-->
    <!--                        spinner.hide(); // Ẩn spinner sau khi xử lý thành công-->
    <!--                        alert('Response: ' + response.body)-->
    <!--                        console.log('Response:', response); // Xử lý thành công-->
    <!--                    },-->
    <!--                    error: function(xhr, status, error) {-->
    <!--                        spinner.hide(); // Ẩn spinner sau khi xử lý thành công-->
    <!--                        // Nếu có lỗi, thông báo cho người dùng-->
    <!--                        alert('Lỗi: ' + xhr.responseJSON.body);-->
    <!--                    }-->
    <!--                });-->
    <!--            });-->
    <!--        });-->
    <!--    </script>-->


</main>


</html>